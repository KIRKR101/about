<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preload" href="SuisseIntlMono-Regular.woff2" as="font" type="font/woff2" crossorigin>
    <title>kirkr.xyz</title>
    <style>
        @font-face {
            font-family: 'SuisseIntlMono';
            src: url('SuisseIntlMono-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --bg-color: #000;
            --text-color: #e0e0e0;
            --card-bg-color: #050505;
            --card-border-color: #1c1c1c;
            --subtle-text-color: #7f7f7f;
            --button-hover-bg-color: #3a3a3a;
            --button-disabled-bg-color: #202020;
            --button-disabled-text-color: #555;
            --overlay-color: rgba(0, 0, 0, 0.9);
            --lightbox-bg: #0a0a0a;
            --skeleton-bg-color: #111;
            --skeleton-shine-color: #1a1a1a;
            --icon-color: #b0b0b0;
        }

        body {
            font-family: 'SuisseIntlMono', monospace;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            font-size: .95rem;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            padding: 2rem;
            box-sizing: border-box;
            overflow-x: hidden;
            position: relative;
        }

        .content-wrapper {
            width: 100%;
            max-width: 60%;
            margin: 0 auto;
        }

        header, main, .main-container, footer {
            width: 100%;
        }

        .page-header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            box-sizing: border-box;
            margin-bottom: 2.5rem;
        }

        h1 {
            font-size: 1.75rem;
            margin-top: 0;
            margin-bottom: 0.5rem;
            font-weight: normal;
            text-align: center;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--subtle-text-color);
            text-align: center;
            margin-top: 0;
            margin-bottom: 2.5rem;
        }

        .arts-section {
            width: 100%;
        }

        .back-button {
            position: absolute;
            top: 2rem;
            left: 2rem;
            z-index: 100;
            color: var(--icon-color);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            transition: color 0.2s ease-in-out;
            padding: 0.25rem 0.5rem;
        }

        .back-button:hover {
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .back-button .arrow-icon {
            width: 18px;
            height: 18px;
            fill: currentColor;
            transform: rotate(180deg);
        }

        .arts-section {
            width: 100%;
        }

        .art-cards-list {
            column-count: 3;
            column-gap: 1.5rem;
        }

        .art-card {
            display: inline-block;
            width: 100%;
            margin-bottom: 1.5rem;
            break-inside: avoid;
            position: relative;
            background-color: var(--card-bg-color);
            border: 2px solid var(--card-border-color);
            border-radius: 14px;
            cursor: pointer;
            overflow: hidden;
            transition: border-color .3s ease;
        }
        
        .art-card:hover {
            border-color: #444;
        }

        .art-card:hover .art-title-overlay {
            opacity: 1;
        }

        .art-image {
            display: block;
            width: 100%;
            height: auto;
            background-color: var(--skeleton-bg-color);
            transition: opacity 0.3s ease;
        }

        .art-image[data-loading="true"] {
            opacity: 0.5;
        }

        .art-image[data-loaded="true"] {
            opacity: 1;
        }

        .art-title-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);
            color: var(--text-color);
            padding: 2rem 1rem 1rem;
            opacity: 0;
            transition: opacity 0.3s ease;
            text-align: left;
        }

        .art-title-overlay .title-line {
            font-size: 1rem;
            font-weight: 400;
            margin: 0;
            text-transform: capitalize;
        }

        .art-title-overlay .artist-line {
            font-size: 0.85rem;
            color: var(--subtle-text-color);
            margin-top: 0.25rem;
            text-transform: capitalize;
        }

        .skeleton {
            cursor: progress;
        }

        .skeleton .skeleton-image,
        .skeleton .skeleton-line {
            background-color: var(--skeleton-bg-color);
            background-image: linear-gradient(90deg, var(--skeleton-bg-color) 0px, var(--skeleton-shine-color) 40px, var(--skeleton-bg-color) 80px);
            background-size: 600px;
            animation: shimmer 1.5s infinite linear;
        }

        .skeleton .skeleton-image {
            width: 100%;
        }

        .skeleton .skeleton-content {
            padding: 1.25rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            width: 300px;
        }

        .skeleton .skeleton-line {
            height: 1em;
            border-radius: 4px;
        }

        @keyframes shimmer {
            to { background-position: 600px; }
        }

        .lightbox {
            position: fixed;
            inset: 0;
            background-color: var(--overlay-color);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 2rem;
            box-sizing: border-box;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            background-color: var(--lightbox-bg);
            border: 2px solid var(--card-border-color);
            border-radius: 14px;
            max-width: 90%;
            max-height: 90%;
            overflow: auto;
            display: flex;
            gap: 2rem;
            padding: 2rem;
        }

        .lightbox-image-container {
            flex: 1;
            max-width: 50%;
        }

        .lightbox-image {
            width: 100%;
            height: 100%;
            border-radius: 16px;
            object-fit: contain;
        }

        .lightbox-info {
            flex: 1;
            max-width: 50%;
        }

        .lightbox-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--card-bg-color);
            border: 2px solid var(--card-border-color);
            color: var(--text-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background-color 0.2s ease-in-out;
        }

        .lightbox-close:hover {
            background-color: var(--button-hover-bg-color);
        }

        .lightbox h2 {
            margin: 0 0 1rem;
            font-size: 1.5rem;
            font-weight: 400;
            text-transform: capitalize;
        }

        .lightbox-description {
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .lightbox-table {
            width: 100%;
            border-collapse: collapse;
        }

        .lightbox-table th,
        .lightbox-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--card-border-color);
            font-size: 0.9rem;
            text-transform: capitalize;
        }

        .lightbox-table th {
            font-weight: 400;
        }

        .lightbox-table td {
            color: var(--subtle-text-color);
        }

        .loading-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--card-border-color);
            border-top: 2px solid var(--text-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 1200px) {
            .art-cards-list {
                column-count: 2;
            }
            .lightbox-content {
                flex-direction: column;
                max-width: 95%;
                max-height: 95%;
            }
            .lightbox-image-container, .lightbox-info {
                max-width: 100%;
            }
        }

        @media (max-width: 800px) {
            .art-cards-list {
                column-count: 1;
            }
            .content-wrapper {
                max-width: 100%;
            }

            body {
                padding-block: 1rem;
                font-size: 1rem;
            }
            .back-button {
                top: 1rem; 
                left: 1rem;
            }
            .art-content {
                padding: 1rem 1.25rem;
            }
            .art-title-overlay {
                opacity: 1;
            }
            .lightbox-content {
                padding: 1rem;
                margin: 1rem;
                gap: 1rem;
            }
            .lightbox-info {
                 font-size: 0.9rem;
            }
            .lightbox h2 {
                font-size: 1.25rem;
            }
            .lightbox-close {
                top: 0.5rem;
                right: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">
        <svg class="arrow-icon" viewBox="0 0 24 24">
            <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
        </svg>
        Back
    </a>
    <div class="content-wrapper">
        <header class="page-header">
            <div>
                <h1>Art</h1>
                <p class="subtitle">a collection of artworks</p>
            </div>
        </header>
        <div class="main-container">
            <section class="arts-section">
                <div class="art-cards-list" id="art-cards-list">
                    <!-- Art cards will be injected by JS -->
                </div>
            </section>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" id="lightbox-close" aria-label="Close lightbox">×</button>
        <div class="lightbox-content">
            <div class="lightbox-image-container">
                <img id="lightbox-image" class="lightbox-image" src="" alt="">
            </div>
            <div class="lightbox-info">
                <h2 id="lightbox-title"></h2>
                <p id="lightbox-description" class="lightbox-description"></p>
                <table class="lightbox-table">
                    <tbody id="lightbox-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const artData = {
            'the-sentry': {
                title: 'The Sentry',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Carel_Fabritius_-_De_poort_bewaker_%281654%29.jpg/500px-Carel_Fabritius_-_De_poort_bewaker_%281654%29.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Carel_Fabritius_-_De_poort_bewaker_(1654).jpg/960px-Carel_Fabritius_-_De_poort_bewaker_(1654).jpg',
                description: "In my opinion Fabritius would be as well known as Rembrandt, his teacher, if not for his early death in the Delft Gunpowder Explosion of 1654. His lack of surviving works can likely be attributed to the same fate. A 2004 restoration revealed a second soldier whose legs are visible under the arch. The initial covering up of this makes sense, considering its improvement to the picture",
                data: [['artist', 'Carel Fabritius'], ['year', '1654'], ['medium', 'Oil on canvas'], ['dimensions', '68 x 58 cm']],
                aspectRatio: '96/113'
            },
            'the-mill': {
                title: 'The Mill',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Rembrandt_van_Rijn_-_The_Mill_-_Google_Art_Project.jpg/960px-Rembrandt_van_Rijn_-_The_Mill_-_Google_Art_Project.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Rembrandt_van_Rijn_-_The_Mill_-_Google_Art_Project.jpg/1232px-Rembrandt_van_Rijn_-_The_Mill_-_Google_Art_Project.jpg',
                description: "One of Rembrandt's many great landscapes. For a long time, its attribution to Rembrandt was doubted, but has been restored in recent years. The colour and brushwork is magnificent.",
                data: [['artist', 'Rembrandt van Rijn'], ['year', 'c. 1645-1648'], ['medium', 'Oil on canvas'], ['dimensions', '87.6 x 105.6 cm']],
                aspectRatio: '77/64'
            },
            'delft-courtyard': {
                title: 'A Courtyard of a House in Delft',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/The_Courtyard_of_a_House_in_Delft.jpg/500px-The_Courtyard_of_a_House_in_Delft.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Pieter_de_Hooch_-_The_Courtyard_of_a_House_in_Delft.jpg/960px-Pieter_de_Hooch_-_The_Courtyard_of_a_House_in_Delft.jpg',
                description: "A pictoral examplar of Dutch genre painting, this work beautifully depicts domestic life. The stone tablet above the arch is a real tablet from a Delft cloister, and can be seen in the Prinsenhof Museum.",
                data: [['artist', 'Pieter De Hooch'], ['year', '1658'], ['medium', 'Oil on canvas'], ['dimensions', '73.5 x 60 cm']],
                aspectRatio: '192/229'
            },
            'card-players': {
                title: 'Card Players in a Sunlit Room',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Card_Players_in_a_sunlit_Room%2C_by_Pieter_de_Hooch.jpg/500px-Card_Players_in_a_sunlit_Room%2C_by_Pieter_de_Hooch.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Card_Players_in_a_sunlit_Room%2C_by_Pieter_de_Hooch.jpg/960px-Card_Players_in_a_sunlit_Room%2C_by_Pieter_de_Hooch.jpg',
                description: "De Hooch demonstrates his mastery of light and perspective, creating a view from a shadowy interior into a bright, sunlit courtyard. The effect is a calm, reflective mood, with restrained figures absorbed in their game.",
                data: [['artist', 'Pieter de Hooch'], ['year', '1658'], ['medium', 'Oil on canvas'], ['dimensions', '77.3 x 67.3 cm']],
                aspectRatio: '32/37'
            },
            'forest-stream': {
                title: 'The Forest Stream',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Jacob_van_Ruisdael_-_The_Forest_Stream_-_Google_Art_Project.jpg/960px-Jacob_van_Ruisdael_-_The_Forest_Stream_-_Google_Art_Project.jpg',
                image: 'https://collectionapi.metmuseum.org/api/collection/v1/iiif/437546/795838/main-image',
                description: "Ruisdael was a master of Dutch landscape painting. This work is remarkable for its rich textures and colors, depicting an untamed vision of nature with a rushing stream, rocky hills, and expansive trees.",
                data: [['artist', 'Jacob Van Ruisdael'], ['year', 'c. 1660'], ['medium', 'Oil on canvas'], ['dimensions', '99.7 x 129.2 cm']],
                aspectRatio: '129.2/99.7'
            },
            'arbeiterstadt': {
                title: 'Arbeiterstadt (City of Workers)',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Hans_Baluschek_-_Arbeiterstadt_%281920%29.jpg/500px-Hans_Baluschek_-_Arbeiterstadt_%281920%29.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/Hans_Baluschek_-_Arbeiterstadt_%281920%29.jpg/960px-Hans_Baluschek_-_Arbeiterstadt_%281920%29.jpg',
                description: "A work of the Berlin Secession, this painting depicts a dark and dirty working-class sector of Berlin. The scene is dominated by industrial smoke and train tracks, with a silhouetted figure looking over the oppressive city.",
                data: [['artist', 'Hans Baluschek'], ['year', '1920'], ['medium', 'Oil on canvas'], ['dimensions', '123 x 92.1 cm']],
                aspectRatio: '92.1/123'
            },
            'moses': {
                title: 'Moses Smashing the Tablets of the Law',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Rembrandt_-_Moses_with_the_Ten_Commandments_-_Google_Art_Project.jpg/500px-Rembrandt_-_Moses_with_the_Ten_Commandments_-_Google_Art_Project.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Rembrandt_-_Moses_with_the_Ten_Commandments_-_Google_Art_Project.jpg/960px-Rembrandt_-_Moses_with_the_Ten_Commandments_-_Google_Art_Project.jpg',
                description: "Rembrandt captures the biblical figure of Moses in a moment of fury. The monumental quality of the figure is achieved through dramatic lighting, expressive brushwork, and a reduced colour palette.",
                data: [['artist', 'Rembrandt van Rijn'], ['year', '1659'], ['medium', 'Oil on canvas'], ['dimensions', '168.5 x 136.5 cm']],
                aspectRatio: '136.5/168.5'
            },
            'nikko-kaido': {
                title: 'Nikkō Kaidō',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Nikko_kaido_hasui_kawase.jpg/330px-Nikko_kaido_hasui_kawase.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/Nikko_kaido_hasui_kawase.jpg/800px-Nikko_kaido_hasui_kawase.jpg',
                description: 'An iconic work of the shin-hanga ("new prints") movement. Hasui Kawase was a master of capturing the atmosphere of Japanese landscapes, conveying the tranquil and almost mystical quality of the historic Nikkō highway.',
                data: [['artist', 'Hasui Kawase'], ['year', '1930'], ['medium', 'Woodblock print'], ['dimensions', '38.2 x 25.2 cm']],
                aspectRatio: '25.2/38.2'
            },
            'suzukawa-river': {
                title: 'Suzukawa River',
                thumbnail: 'https://corsproxy.io/?https://www.fujibi.or.jp/assets/images/artwork/source/06889.jpg',
                image: 'https://egenolfgallery.com/cdn/shop/products/YOC059L_1024x1024@2x.jpg?v=1631082219',
                description: "Another leading figure of the shin-hanga movement, Hiroshi Yoshida was known for his landscape prints. This work presents a serene and majestic view of Mount Fuji, its snow-capped peak perfectly reflected in the calm waters.",
                data: [['artist', 'Yoshida Hiroshi'], ['year', '1935'], ['medium', 'Woodblock print'], ['dimensions', '27.3 x 40.5 cm']],
                aspectRatio: '15/10'
            },
            'abbey-in-the-oakwood': {
                title: 'The Abbey in the Oakwood',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Caspar_David_Friedrich_-_Abtei_im_Eichwald_-_Google_Art_Project.jpg/960px-Caspar_David_Friedrich_-_Abtei_im_Eichwald_-_Google_Art_Project.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Caspar_David_Friedrich_-_Abtei_im_Eichwald_-_Google_Art_Project.jpg/1280px-Caspar_David_Friedrich_-_Abtei_im_Eichwald_-_Google_Art_Project.jpg',
                description: "A Romantic landscape that conveys themes of transience and the sublime. The painting depicts the ruins of a Gothic abbey, standing desolate amidst a grove of bare, wintry oak trees. A funeral procession of monks makes its way towards the crumbling structure. The sombre tones, stark silhouettes, and fading evening light create a mood of melancholy, while the vast sky towering above hints at spiritual transcendence. Through this interplay of ruin, nature, and human ritual, Friedrich evokes both the fragility of earthly existence and the enduring presence of the divine.",
                data: [['artist', 'Caspar David Friedrich'], ['year', '1808-1810'], ['medium', 'Oil on canvas'], ['dimensions', '171 x 110.4 cm']],
                aspectRatio: '4000/2563'
            },
            'view-of-delft': {
                title: 'View of Delft',
                thumbnail: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Vermeer-view-of-delft.jpg/960px-Vermeer-view-of-delft.jpg',
                image: 'https://corsproxy.io/?https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Vermeer-view-of-delft.jpg/1233px-Vermeer-view-of-delft.jpg',
                description: "This painting presents a panoramic view of Delft from across the river Schie, with sunlight breaking through clouds to illuminate parts of the city’s architecture, most notably the Nieuwe Kerk and its towering spire. Vermeer’s meticulous attention to detail and subtle handling of light imbue the scene with a sense of calm realism, balancing the everyday activity of figures along the waterfront with the stillness of the reflective water. The work combines topographical accuracy with poetic atmosphere, transforming a familiar urban landscape into a timeless meditation on place and presence.",
                data: [['artist', 'Johannes Vermeer'], ['year', '1660-1661'], ['medium', 'Oil on canvas'], ['dimensions', '115.7 x 96.5 cm']],
                aspectRatio: '289/240'
            }
        };

        class ArtGallery {
            constructor() {
                this.list = document.getElementById('art-cards-list');
                this.lightbox = document.getElementById('lightbox');
                this.lightboxClose = document.getElementById('lightbox-close');
                this.lightboxImage = document.getElementById('lightbox-image');
                this.lightboxTitle = document.getElementById('lightbox-title');
                this.lightboxDescription = document.getElementById('lightbox-description');
                this.lightboxTableBody = document.getElementById('lightbox-table-body');

                this.cards = [];
                this.loadQueue = [];
                this.loadingImages = new Set();
                
                this.init();
            }

            createSkeletonCard(aspectRatio) {
                const card = document.createElement('div');
                card.className = 'art-card skeleton';
                card.innerHTML = `
                    <div class="skeleton-image" style="aspect-ratio: ${aspectRatio}"></div>
                    <div class="skeleton-content">
                        <div class="skeleton-line" style="width:60%"></div>
                        <div class="skeleton-line" style="width:90%"></div>
                    </div>
                `;
                return card;
            }

            createArtCard(artId, art) {
                const card = document.createElement('div');
                card.className = 'art-card';
                card.dataset.artId = artId;

                const artist = art.data.find(item => item[0] === 'artist')[1];
                const year = art.data.find(item => item[0] === 'year')[1];
                
                card.innerHTML = `
                    <img 
                        data-src="${art.thumbnail}" 
                        alt="${art.title}" 
                        class="art-image"
                        data-loading="true"
                        style="aspect-ratio: ${art.aspectRatio}"
                    >
                    <div class="art-title-overlay">
                        <div class="title-line">${art.title} (${year})</div>
                        <div class="artist-line">${artist}</div>
                    </div>
                `;
                return card;
            }

            loadImage(img) {
                return new Promise((resolve) => {
                    if (this.loadingImages.has(img)) {
                        resolve();
                        return;
                    }
                    
                    this.loadingImages.add(img);
                    
                    const imageUrl = img.dataset.src;
                    if (!imageUrl) {
                        resolve();
                        return;
                    }

                    const tempImg = new Image();
                    tempImg.onload = () => {
                        img.src = imageUrl;
                        img.dataset.loaded = 'true';
                        img.removeAttribute('data-loading');
                        this.loadingImages.delete(img);
                        resolve();
                    };
                    
                    tempImg.onerror = () => {
                        img.alt = 'Failed to load image';
                        img.removeAttribute('data-loading');
                        this.loadingImages.delete(img);
                        resolve();
                    };
                    
                    tempImg.src = imageUrl;
                });
            }

            async loadAllImages() {
                const loadPromises = this.cards.map(card => {
                    const img = card.querySelector('.art-image');
                    if (img && img.dataset.src && !img.src) {
                        return this.loadImage(img);
                    }
                    return Promise.resolve();
                });
                await Promise.all(loadPromises);
            }

            openLightbox(artId) {
                const art = artData[artId];
                if (!art) return;

                // Show a loading indicator while the full-res image loads
                this.lightboxImage.src = '';
                this.lightboxImage.style.opacity = '0.5';
                const tempImg = new Image();
                tempImg.onload = () => {
                    this.lightboxImage.src = tempImg.src;
                    this.lightboxImage.style.opacity = '1';
                };
                tempImg.src = art.image;

                this.lightboxImage.alt = art.title;
                this.lightboxTitle.textContent = art.title;
                this.lightboxDescription.textContent = art.description;

                this.lightboxTableBody.innerHTML = art.data
                    .map(([key, value]) => `<tr><th>${key}</th><td>${value}</td></tr>`)
                    .join('');
                
                this.lightbox.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            closeLightbox() {
                this.lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }

            bindEvents() {
                this.lightboxClose.addEventListener('click', () => this.closeLightbox());
                this.lightbox.addEventListener('click', (e) => {
                    if (e.target === this.lightbox) this.closeLightbox();
                });

                document.addEventListener('keydown', (e) => {
                    if (this.lightbox.classList.contains('active')) {
                        if (e.key === 'Escape') this.closeLightbox();
                    }
                });
            }

            async init() {
                this.bindEvents();
                
                const artIds = Object.keys(artData);
                
                // Create skeleton cards first for immediate visual feedback
                artIds.forEach((artId) => {
                    const art = artData[artId];
                    const skeleton = this.createSkeletonCard(art.aspectRatio);
                    this.list.appendChild(skeleton);
                });

                // Create real cards but don't load images yet
                const realCards = artIds.map((artId) => {
                    const art = artData[artId];
                    return this.createArtCard(artId, art);
                });

                // Replace skeletons with real cards progressively
                let loadedCount = 0;
                const skeletons = Array.from(this.list.querySelectorAll('.skeleton'));
                
                realCards.forEach((card, index) => {
                    // Add click event listener
                    card.addEventListener('click', () => {
                        this.openLightbox(card.dataset.artId);
                    });

                    // Replace skeleton with real card after a small delay to stagger loading
                    setTimeout(() => {
                        if (skeletons[index] && skeletons[index].parentNode) {
                            skeletons[index].replaceWith(card);
                            this.cards.push(card);
                            
                            if (this.cards.length === artIds.length) {
                                // All cards are in the DOM, now load images
                                this.loadAllImages();
                            }
                        }
                    }, index * 50); // Stagger by 50ms each
                });
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => new ArtGallery());
        } else {
            new ArtGallery();
        }
    </script>
</body>
</html>
